@* @page
@model ExternalLoginsModel
@{
    ViewData["Title"] = "Manage your external logins";
    ViewData["ActivePage"] = ManageNavPages.ExternalLogins;
}

<partial name="_StatusMessage" for="StatusMessage" />
@if (Model.CurrentLogins?.Count > 0)
{
    <h3>Registered Logins</h3>
    <table class="table">
        <tbody>
            @foreach (var login in Model.CurrentLogins)
            {
                <tr>
                    <td id="@($"login-provider-{login.LoginProvider}")">@login.ProviderDisplayName</td>
                    <td>
                        @if (Model.ShowRemoveButton)
                        {
                            <form id="@($"remove-login-{login.LoginProvider}")" asp-page-handler="RemoveLogin" method="post">
                                <div>
                                    <input asp-for="@login.LoginProvider" name="LoginProvider" type="hidden" />
                                    <input asp-for="@login.ProviderKey" name="ProviderKey" type="hidden" />
                                    <button type="submit" class="btn btn-primary" title="Remove this @login.ProviderDisplayName login from your account">Remove</button>
                                </div>
                            </form>
                        }
                        else
                        {
                            @: &nbsp;
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
@if (Model.OtherLogins?.Count > 0)
{
    <h4>Add another service to log in.</h4>
    <hr />
    <form id="link-login-form" asp-page-handler="LinkLogin" method="post" class="form-horizontal">
        <div id="socialLoginList">
            <p>
                @foreach (var provider in Model.OtherLogins)
                {
                    <button id="@($"link-login-button-{provider.Name}")" type="submit" class="btn btn-primary" name="provider" value="@provider.Name" title="Log in using your @provider.DisplayName account">@provider.DisplayName</button>
                }
            </p>
        </div>
    </form>
}
 *@



@page
@model ExternalLoginsModel
@{
    ViewData["Title"] = "Manage your external logins";
    ViewData["ActivePage"] = ManageNavPages.ExternalLogins;
}

<partial name="_StatusMessage" for="StatusMessage" />

@if (Model.CurrentLogins?.Count > 0)
{
    <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
        @foreach (var login in Model.CurrentLogins)
        {
            <div class="flex justify-between items-center p-4 border-b last:border-b-0">
                <div class="flex items-center gap-3">
                    <svg class="w-6 h-6 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2a8 8 0 100 16 8 8 0 000-16zM8.5 7h3a1 1 0 010 2h-3a1 1 0 010-2zM10 11a1.5 1.5 0 110 3 1.5 1.5 0 010-3z" />
                    </svg>
                    <span class="text-gray-700 font-medium">@login.ProviderDisplayName</span>
                </div>
                @if (Model.ShowRemoveButton)
                {
                    <form id="@($"remove-login-{login.LoginProvider}")" asp-page-handler="RemoveLogin" method="post">
                        <input asp-for="@login.LoginProvider" name="LoginProvider" type="hidden" />
                        <input asp-for="@login.ProviderKey" name="ProviderKey" type="hidden" />
                        <button type="submit" class="flex items-center gap-2 px-4 py-2 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 transition">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                            Remove
                        </button>
                    </form>
                }
            </div>
        }
    </div>
}

@if (Model.OtherLogins?.Count > 0)
{
    <h4 class="text-2xl font-semibold text-gray-800 mt-8 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" />
        </svg>
        Add another login method
    </h4>
    <hr class="my-4 border-gray-300" />

    <form id="link-login-form" asp-page-handler="LinkLogin" method="post">
        <div id="socialLoginList" class="grid grid-cols-2 gap-4">
            @foreach (var provider in Model.OtherLogins)
            {
                <button id="@($"link-login-button-{provider.Name}")" type="submit" name="provider" value="@provider.Name"
                        class="flex-1 flex items-center justify-center gap-2 py-3 rounded-lg shadow-md font-medium transition
                                @(provider.Name == "Google" ? "bg-rose-600 hover:bg-rose-700 text-white" : "bg-blue-600 hover:bg-blue-700 text-white")">

                    @if (provider.Name == "Google")
                    {
                        <svg xmlns="http://www.w3.org/2000/svg" class="text-white" fill="white" x="0px" y="0px" width="20" height="20" viewBox="0 0 30 30">
                            <path d="M 15.003906 3 C 8.3749062 3 3 8.373 3 15 C 3 21.627 8.3749062 27 15.003906 27 C 25.013906 27 27.269078 17.707 26.330078 13 L 25 13 L 22.732422 13 L 15 13 L 15 17 L 22.738281 17 C 21.848702 20.448251 18.725955 23 15 23 C 10.582 23 7 19.418 7 15 C 7 10.582 10.582 7 15 7 C 17.009 7 18.839141 7.74575 20.244141 8.96875 L 23.085938 6.1289062 C 20.951937 4.1849063 18.116906 3 15.003906 3 z"></path>
                        </svg>
                    }
                    else
                    {
                        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22 12c0-5.5-4.5-10-10-10S2 6.5 2 12c0 4.6 3.2 8.4 7.5 9.6v-6.7H7.1v-2.9h2.4V9.6c0-2.4 1.4-3.7 3.5-3.7.7 0 1.5.1 2.2.2v2.4h-1.5c-1.2 0-1.6.7-1.6 1.5v1.8h2.9l-.5 2.9h-2.4v6.7C18.8 20.4 22 16.6 22 12z" />
                        </svg>
                    }

                    Login with @provider.DisplayName
                </button>
            }
        </div>
    </form>
}
