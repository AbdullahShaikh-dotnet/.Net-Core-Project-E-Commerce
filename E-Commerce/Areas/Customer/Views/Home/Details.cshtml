@model ShoppingCart

<style>
    /* Hide spinners in Chrome, Safari, Edge, and Opera */
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Hide spinners in Firefox */
    input[type="number"] {
        -moz-appearance: textfield;
    }
</style>

<form method="post" class="max-w-5xl mx-auto p-4">
    <input asp-for="ProductID" type="hidden" />

    <!-- Back to Home Button -->
    <div class="mt-4 text-left">
        <a asp-action="Index" class="text-gray-600 hover:text-gray-500 font-medium inline-flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5 mr-2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" />
            </svg> Back to Home
        </a>
    </div>

    <!-- Product Section -->
    <div class="bg-white shadow-sm border border-gray-100 rounded-md overflow-hidden">

        <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Product Image -->
            <div>
                @* <img src="@Model.product.ImageURL" alt="@Model.product.Title" class="w-full h-auto rounded-xl"> *@
            </div>

            <!-- Product Details -->
            <div class="space-y-4">

                <span class="text-xs font-semibold bg-green-500 text-white px-3 py-1 rounded">@Model.product.Category.Name</span>

                <div class="text-gray-500 text-sm flex justify-between item-center">
                    <div>
                        <p class="mb-2 mt-1">ISBN: 1234567890</p>
                        <p>List Price: <span class="line-through">@Model.product.ListPrice.ToString("C")</span></p>
                    </div>

                    <!-- Header (Title Author) -->
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">@Model.product.Title</h2>
                        <p class="text-gray-500 text-sm text-right">by @Model.product.Author</p>
                    </div>
                </div>

                <!-- Pricing Table -->
                <div class="border rounded-sm overflow-hidden">
                    <div class="grid grid-cols-4 bg-gray-100 text-center text-sm font-semibold">
                        <div class="p-3">Quantity</div>
                        <div class="p-3">1-50</div>
                        <div class="p-3">51-100</div>
                        <div class="p-3">100+</div>
                    </div>
                    <div class="grid grid-cols-4 text-center text-lg font-semibold text-blue-600">
                        <div class="p-3">Price</div>
                        <div class="p-3">@Model.product.Price.ToString("C")</div>
                        <div class="p-3">@Model.product.Price50.ToString("C")</div>
                        <div class="p-3">@Model.product.Price100.ToString("C")</div>
                    </div>
                </div>

                <!-- Quantity Selector -->
                <div class="flex items-center space-x-5">
                    <label for="count">Quantity</label>
                    <div class="flex items-center border border-gray-300 rounded-md">
                        <!-- Decrement Button -->
                        <button type="button" class="px-3 py-3 rounded-md text-gray-700 hover:bg-gray-50" onclick="updateQuantity(-1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14" />
                            </svg>
                        </button>
                        <!-- Input Field -->
                        <input asp-for="Count" type="number" value="1" class="w-16 p-2 text-center border-0" id="quantityInput" min="1" max="150" oninput="validateQuantity(this)">
                        <!-- Increment Button -->
                        <button type="button" class="px-3 py-3 rounded-md text-gray-700 hover:bg-gray-50" onclick="updateQuantity(1)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Buttons Section -->
                <div class="pt-6 border-t flex flex-col sm:flex-row gap-4">
                    <button type="submit" class="w-full sm:w-1/2 bg-blue-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-blue-500 transition duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 inline-block mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                        </svg>
                        Add to Cart
                    </button>

                    <button type="submit" class="w-full sm:w-1/2 bg-orange-500 text-white py-3 rounded-lg text-lg font-semibold hover:bg-orange-400 transition duration-200">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 inline-block mr-2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z" />
                        </svg>
                        Buy Now
                    </button>
                </div>
            </div>
        </div>

        <!-- Description -->
        <div class="p-6 border-t text-gray-600 text-sm leading-relaxed">
            <h4 class="text-gray-500 text-lg font-semibold pb-2">Description</h4>
            @Html.Raw(Model.product.Description)
        </div>
    </div>
</form>



<script defer>
    function updateQuantity(change) {
        const quantityInput = document.getElementById('quantityInput');
        let currentValue = parseInt(quantityInput.value, 10);

        // Update the value
        currentValue += change;

        // Ensure the value stays within the range [1, 150]
        if (currentValue < 1) {
            currentValue = 1;
        } else if (currentValue > 150) {
            currentValue = 150;
        }

        // Update the input value
        quantityInput.value = currentValue;
    }

    function validateQuantity(input) {
        let value = parseInt(input.value, 10);

        // If the input is not a number, reset to 1
        if (isNaN(value)) {
            input.value = 1;
            return;
        }

        // Ensure the value stays within the range [1, 150]
        if (value < 1) {
            input.value = 1;
        } else if (value > 150) {
            input.value = 150;
        }
    }
</script>
